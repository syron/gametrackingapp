@{
    ViewBag.Title = "Index";
}

<div ng-controller="PingisCtrl" ng-init="init('@ViewBag.CurrentUserId')">

    <div ng-hide="currentUserIsRegistered == false">
        <a class="btn btn-info" ng-click="unregisterMe()">Unregister</a>

        <div class="challenge">
            <select ng-model="selectedUserToChallenge">
                <option ng-repeat="user in users" value="{{user.UserId}}">
                    {{user.DisplayName}}
                </option>
            </select>
            <input type="button" class="btn btn-success" ng-click="challenge()" value="Challenge" />
        </div>

        <h1>Games</h1>

        <div class="row">

            <div class="col-md-4">
                <h3>Challenged</h3>

                <ul class="list-group">
                    <li class="list-group-item" ng-repeat="match in mychallengedmatches">
                        {{match.Challenger.DisplayName}} vs {{match.Opponent.DisplayName}}

                        <span ng-hide="match.Challenger.UserId == currentUserId">
                            <a class="btn btn-success" ng-click="acceptMatch(match.MatchId)">Accept</a> <a class="btn btn-danger" ng-click="declineMatch(match.MatchId)">Decline</a>
                        </span>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <h3>Upcoming</h3>

                <ul class="list-group">
                    <li class="list-group-item" ng-repeat="match in myupcomingmatches">
                        {{match.Challenger.DisplayName}} vs {{match.Opponent.DisplayName}}
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <h3>Last 5 played games</h3>
            </div>

        </div>




    </div>
    <div ng-hide="currentUserIsRegistered == true">
        <a class="btn btn-info" ng-click="registerMe()">Register</a>
    </div>
</div>
